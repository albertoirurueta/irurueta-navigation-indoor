language: java

jdk:
  - oraclejdk11

sudo: false
env:
    global:
        #key for github
        #GITHUB_OAUTH_TOKEN
        - secure: "cfxQymkhCIIRKGTYUoXCIqRPFbJRMy/aVmQyxEnvfpqReaas8k7xxmmWXLS8mQDxxdKS50DuSyXRI2HbAZyHX9dCPb8Sqxx6gDFOgoFQ7cuNTscErq1oOVVSUJ32ks+bhfpkjWBMp2iYv2XHtwDJO2uJEY2ARG7l9PjZp40x1XmznkPVgBS1HhXHOi7H15xlBb47G5XxhmSiUdAKxTYWmU0n0jU2Yi28SB/1rKSuPCgCT4nHSBwQb1osMcBDZkPO7km2x5uZs48FHFJlkcQ+bj4ycQSqjyrdjDVlAC8oxx4rmUdfhyuQGfc3HR5ZGpm2/JtKqUsEjMxrqs40HMNF5S69cUphaQ8+0rp+/bCAQ/XY/qQCUzvScxNgMCV67JO0Er9uRp/bHu8lpVcfIyEtF+3Fn34ZScJ0BWwNouNycdECR5E86FzGd+kOtrAvIo7JTqt9PMQqpZiffeIb9KDJGkOY+iCvgYllgBdWPbyqQO9L/KI40B9/AFTQyw+ynslo3nYVU6+cGoQSFVaOIIXr13ZDotkQ7Ft+38HBXIv5HfIj3xRflCXz9d05pFmWk4NUzR1Lt8wGMB4wbjanUDDaa7TbTfVMP7M6jcb/HQt7gRI05jN532NGgX5hdPN4T2wEC258006I3bcP9XJUEXShjXaYX9pTnw5u44EFeRjJl7A="
        - environment=test
        #sonatype credentials
        #OSSRH_JIRA_USERNAME
        - secure: "nb8Y8fJtSiD2RJLs8Igy3KpHf1EZLCtDrCcnN52KiGUZkXzUgufNGxtxEvNtyC+hM71ljcismOm+1F1DzUFgJR7S8qpjxVdbTHT4p0gC62ue2y4H+xMcpUKJekdrdzVmGjrAcUVLCAmQyNPMx51J0jwExd0f8YOGC5pwgcgqAWQfi/V77f//m+hLtOfp+/G/qPMMUvoc9o7EKfe23EqUaTJK5Ml83At9vOwrGTI3brKychZE0+GCtEdJIrHz1aC+1IwgsgkOO03CeoWbl5EVEgsJhvjklQnK1/Pcl2cb4AXTFiLlzI77bxGkecNFgcufxONOUSigx4jkuht4wF+olAwBupbE+7zWTuxJtFwmgVHUdMaDrPz9DtfP4tJwr8v2AMY6FXLHqRxtf2OAYsjEtqPi2e91xphiSkK2iSHS61J2yHEFPJOKBKSdJYGNSEcZyVdqFsix4BxWwlGFOBwtXyybXC14pdLOBB2mLwfWLlGZB/DswXYJ2ZgZYnlYrQLEkgr8kXzwn4x0+VpUNer3BSsGpv8rupXsPDu/o1uYnK6NVrMeEassrBMfO+GVp+V2NEMN/Ipr5FawFBdaxCCYwIBlpttGHlv22Xxy6iyA11p+5nXty6fLt1ZTnycFxRrE0xW8OjsBsF4T54QZk8eM+zN5UQEAXowU7VvtNddkqsU="
        #OSSRH_JIRA_PASSWORD
        - secure: "GKV/Pk0K6V2EK92zcAyPARsT8R4HEF4gtOWfA3RAQnT7nK20IIbKcZ6vhab8F3emCW1bUNvvLDPgiZMpgxyNJ05XSluzhk3CnwVOyJSg6vj78AT/AYEsTjZW4o3n3wx/rWT33Xc+Al9JyQT7TlSaHFGZ4gzph1TfsstvJatZ67k85jPwReGBmepemn9KkVx2d4LbQT8Ksbe7JYVgWeDmDnk2PLzRZJHLeJ+GkJ4OCKum07UwchcQNFmMoltxYMKEuBiJ1qRE+gPIrUDqo+E9Re0ZJqirNcqpWxMRGZEni5n3HDqSjQHHHbBrIMbf04kbu6faNIlOiTf2Un6r3gX77NG8U/Sq0hkRfzH4nmE72yKHlkPfmuHk0G4QeLJLR+cvVw8bwDnaBHPG20Z0MTBxaJQb10cVYNnqbG7qoLFfrxjTcHi4rfDHLp/MhsWKJFS3RUDUQgB+iUoT5K3Mv/PtFxMIjOvR2OHitTPRsXqOv3DWaVXDW8GXdgqEBNlP/4ahctjiaB0itMqdsKScCfaGFqdncKzyc4Wts54yZlHb2T9egNFyTC8fXOlulJ7RRcSJM5vBjftr/4u3qo1hmsQlN3r1wLd05a3xNNYo+baeVDDT+zD9yTYJKIcou5xVxi1YFMYQc0JItmcwUIBWPm92II73Bkj39nXCfo5/Pngig9M="
        #signing key
        #GPG_KEY_NAME
        - secure: "WmJD8+vXqlaOVGUM12XoDFf+frLI+7SOqWUA7AHwRi9f3qzuZ4aasI4Gl8rRSx5YabCgBtieQRaVaObIAbwJeNlto9fv6fwBb5EEl8h6uGWgf8Rj8GEHR18pngS1dgo5AKNM9T2+i9Jg9EPvRqjZJtIRWoNJ4KhrxDF3FBJyOYUQoa0sqsbKGU7mje0rLyyBRbsO+TjKUqqMOd7pzqu3OxC0/1Yyv3mxjFz9pFF04EjXFDAeuGhoiBEq0XJJf36H89KiBiOQbfUqpL24MLhFQs5BFYnt8zMRVG7I3PvnGgzK+wy1NETpaQZAlPSovqWp551YsKTfTrvSZApn1HmNVXs5V/Eh2+b2MCEdkQPOfHhy7woRfhx8R9UPbj/mEkd1pDRrn22dG3N8RznjurVa9ciDnk5EmpuZu5hufVagYfQJvNdoszxquQIl2eZBabdk3eDqVgseqyE5sUXElt9YyzK5ZZ3m2OFP7ZLPlWrH0PAmG27hwmt/bmbvmpEY6erCcz7N1JF001WbjZFu9sPXyyvHwr7GGbGmIm8B1xlBPV8vnVN8y5pvRY7t0IT16q+e2CG+V51EcEeB8+JQLIFRwYxU1+zyDiRyyOZajPzldmnbiJwUQ7loIA+otIrUkpG7voPnaANemC5XGGxOWA9Rx8tJ9BKIUNl1hSVqaLu3MjY="
        #GPG_PASSPHRASE
        - secure: "gqPzRfymcOPABgeTJyKkOY9wS+nHgdu8gEb9Ln8rvpMAWlbt39GNOWsH41Hlq9Vwa8Ck33f2PFE2G41k0PQTk4qQQzqzQKXzqb7szPns82Uxn9MEx+K/NUi738g6kX4V7eKUgZNLTg4Nue7PnHP/LcyDJUMQTfVWbCCt7ivmN4PTgRXxNOq+rxPh8eGaCqfxsVzCZqPCLV6A24CNLiE20UY7xf/0eJ4HvJIDz10nDCahXZNGhmmZk47Z3kileq/YO6Y9k7MAmdKRgAyqUK2VbpJLx+cCN/CYIHfNn5gdAUl5kQtMKmyWxZmL8wNNqX+ckkfLzq7FVJ4NAmQVRu86Pk75mVeItQib7vzYwSTGcn+calCw1DCVpiTu+abFPrjFzSNMP74U1zwFy5e8UKUikQVD14O65m3X5jE8jTWz3kyxpnnIeifxPyzzIFyHHcM0mHjF6PRV6ZwQ1ueIO+pGC7yKnljwxyYdNo7croNZny/hD39uMhkvKRP0E9O25cUm36G96vibIEckRa8sYD7UoTsk4gsWZDR+RSYhZtCvVqPt6rpu0PZJC4vfG5W3sLMYTjEwkOtyP+TFCjpyRqKTOLWfB4lNecSx+uLub8Ztbc+FK7I+2JUkj8lw+ogweqYSeHAn+yfOPQf/WiBDxxCArex0dnlzJh/OZLjw6frules="

addons:
  sonarcloud:
    organization: "albertoirurueta-github"
    token:
      secure: "k+UGwaKSZtq9p9raTNAuhCEBbtPNg+Tz6cC072Fayt/pDo8lQ4NM0EdOtogZd8PKEwJGcZQqKRLy15GSL+muufBYlsiIDkwzy+vtI2nWhNgTvVyMf7Y119pHDCFYHV5Oydn/8z8T+y7KRvGKAPsXb5dCzcR0wQhqSl6OGehLnBMrEq3Bj4dv3Jr1p9Fqy59Eh4RogF9Ock6t5mNzI/55y5jlQ1iX9lqtjj3BMaYppriUwSVn84cyVJVc4k49dfQ+pPUQh3ao+sO2ZmZkitrhrFCznpm9lqEcKtBm3bDJN0CiC4GVLpNjtPVdMrP9QMHZ7co1lFkE5ytUuZqNvyo0KBEVDLU1rixnrgo0XUFyCYyC60nKO0RwDcThg1mEEkosI42lE4T26NqirGV87/fy9EZJSlHy0s26oPfwP6D6tbQnbvBqi5pTqCoIWKTrv0MgrGbN0fv9gANJJv9ntCO0a8sEf3pb4KdznTf4Zu7AyEpp1zxmsP00m+x2+xXzIEbiaOFEIVBI6If/kg7O4RzP8GTfGIl7YvqbGHgYrjQrWPmuCMYyFY+NSs/Fqj4hEqq3wyFNq6NClgkn8agNodPe54YnyWCjOdjQf2WJZ1QfAix+31mWRGav1AmQ0eB2npdbpOVj/UA8uYMBUbh2UB8LqRYEVC4Ki8UpqjLSQVu3l3I="

#if timeout occurs, add travis_wait as in example below:
#script: travis_wait mvn clean jacoco:prepare-agent install jacoco:report site

#add: -Denvironment=test to activate CI profile to publish into gh-pages
script:
  - travis_wait 50 mvn clean jacoco:prepare-agent install jacoco:report --quiet -P !build-extras
  - mvn site -Djacoco.skip -DskipTests --quiet -P !build-extras
  - sonar-scanner

cache:
  directories:
    - ~/.m2/repository

deploy:
  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_OAUTH_TOKEN
  keep-history: true
  local-dir: ./target/site
  on:
    branch: master

after_success:
  - ./cd/before-deploy.sh
  - ./cd/deploy.sh
